<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TASMAC Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #34495e;
            --accent: #3498db;
            --light: #ecf0f1;
            --danger: #e74c3c;
            --success: #2ecc71;
            --warning: #f39c12;
        }
        
        body {
            background-color: #f5f7f9;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .navbar {
            background-color: var(--primary);
        }
        
        .sidebar {
            background-color: var(--secondary);
            color: white;
            height: 100vh;
            position: fixed;
            padding-top: 60px;
        }
        
        .sidebar a {
            color: white;
            padding: 15px 20px;
            text-decoration: none;
            display: block;
            transition: 0.3s;
        }
        
        .sidebar a:hover {
            background-color: var(--accent);
        }
        
        .main-content {
            margin-left: 250px;
            padding: 20px;
            padding-top: 80px;
        }
        
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            margin-bottom: 20px;
            border: none;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card {
            text-align: center;
            padding: 20px;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 1rem;
            color: #7f8c8d;
        }
        
        .alert-warning {
            background-color: #fff3cd;
            border-left: 4px solid var(--warning);
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .recent-purchases {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .purchase-item {
            border-bottom: 1px solid #eee;
            padding: 10px 0;
        }
        
        .language-selector {
            position: absolute;
            right: 20px;
            top: 15px;
        }
        
        .last-updated {
            font-size: 0.8rem;
            color: #7f8c8d;
            text-align: right;
            margin-top: 10px;
        }
        
        .progress {
            height: 10px;
            margin-top: 5px;
        }
        
        .user-limit-badge {
            font-size: 0.7rem;
            padding: 3px 6px;
        }
        
        .shop-performance {
            margin-bottom: 15px;
        }
        
        .consumption-meter {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .db-status {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .connected {
            background-color: rgba(46, 204, 113, 0.2);
            color: var(--success);
        }
        
        .disconnected {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }
        
        .tab-content {
            padding: 20px;
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }
        
        .nav-tabs .nav-link.active {
            background-color: var(--primary);
            color: white;
            border: none;
        }
        
        .nav-tabs .nav-link {
            color: var(--primary);
        }
        
        .district-performance {
            margin-bottom: 15px;
        }
        
        .logout-btn {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-wine-bottle"></i> TASMAC Alcohol Sales Admin Dashboard
            </a>
            <div class="language-selector">
                <select class="form-select form-select-sm">
                    <option>ENG</option>
                    <option>TAM</option>
                    <option>HIN</option>
                </select>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <div class="sidebar col-md-3 col-lg-2 d-md-block">
        <a href="#" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
        <a href="#"><i class="fas fa-users"></i> Users</a>
        <a href="#"><i class="fas fa-store"></i> Shops</a>
        <a href="#"><i class="fas fa-chart-bar"></i> Reports</a>
        <a href="#"><i class="fas fa-cog"></i> Settings</a>
        <a class="logout-btn" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- MongoDB Connection Status -->
        <div class="db-status connected">
            <i class="fas fa-database"></i> <strong>MongoDB Connected</strong> - Database synchronization active
        </div>

        <div class="row">
            <!-- Statistics Cards -->
            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="stat-number" id="total-users">8</div>
                    <div class="stat-label">TOTAL USERS</div>
                    <div class="text-muted small">Registered in system</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="stat-number">6</div>
                    <div class="stat-label">TOTAL SHOPS</div>
                    <div class="text-muted small">Across 3 districts</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="stat-number" id="today-sales">12</div>
                    <div class="stat-label">TODAY'S SALES (L)</div>
                    <div class="text-muted small">This month: <span id="month-sales">124</span> L</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="stat-number">3</div>
                    <div class="stat-label">DISTRICTS COVERED</div>
                    <div class="text-muted small">Chennai, Madurai, Coimbatore</div>
                </div>
            </div>
        </div>

        <!-- Tabs for different views -->
        <ul class="nav nav-tabs mt-4" id="dashboardTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="user-tab" data-bs-toggle="tab" data-bs-target="#user" type="button" role="tab">User Consumption</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="shop-tab" data-bs-toggle="tab" data-bs-target="#shop" type="button" role="tab">Shop Activity</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="compliance-tab" data-bs-toggle="tab" data-bs-target="#compliance" type="button" role="tab">Compliance</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="reports-tab" data-bs-toggle="tab" data-bs-target="#reports" type="button" role="tab">Reports & Insights</button>
            </li>
        </ul>

        <div class="tab-content" id="dashboardTabsContent">
            <!-- User Consumption Tab -->
            <div class="tab-pane fade show active" id="user" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-users"></i> User Consumption Overview
                            </div>
                            <div class="card-body">
                                <div class="consumption-meter">
                                    <div class="d-flex justify-content-between">
                                        <strong>Praveen (ID: 1234)</strong>
                                        <span class="badge bg-danger user-limit-badge">Limit Reached</span>
                                    </div>
                                    <div class="mt-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Monthly Consumption:</span>
                                            <span>4.8/4.8 L</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-danger" role="progressbar" style="width: 100%"></div>
                                        </div>
                                    </div>
                                    <div class="mt-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Weekly Consumption:</span>
                                            <span>1.2/1.2 L</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-warning" role="progressbar" style="width: 100%"></div>
                                        </div>
                                    </div>
                                    <div class="mt-2">
                                        <small>Breakdown: Beer (2.4L), Whisky (1.8L), Wine (0.6L)</small>
                                    </div>
                                </div>
                                
                                <div class="consumption-meter">
                                    <div class="d-flex justify-content-between">
                                        <strong>Average User Consumption</strong>
                                        <span class="badge bg-success user-limit-badge">Normal</span>
                                    </div>
                                    <div class="mt-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Monthly Average:</span>
                                            <span>2.7/4.8 L</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar" role="progressbar" style="width: 56%"></div>
                                        </div>
                                    </div>
                                    <div class="mt-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Weekly Average:</span>
                                            <span>0.7/1.2 L</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar" role="progressbar" style="width: 58%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-chart-pie"></i> Alcohol Preference by Type
                            </div>
                            <div class="card-body">
                                <canvas id="alcoholPreferenceChart" height="250"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-history"></i> Recent User Purchases
                            </div>
                            <div class="card-body recent-purchases">
                                <div class="purchase-item">
                                    <div class="d-flex justify-content-between">
                                        <strong>Praveen (ID: 1234)</strong>
                                        <span class="badge bg-danger">Limit Reached</span>
                                    </div>
                                    <div>0.6 L (3 bottles) - Chennai Shop #12</div>
                                    <div class="text-muted small">20 Sep 2025, 11:15 AM | Beer</div>
                                </div>
                                <div class="purchase-item">
                                    <div class="d-flex justify-content-between">
                                        <strong>Rajesh (ID: 5678)</strong>
                                        <span class="badge bg-success">Available</span>
                                    </div>
                                    <div>0.2 L (1 bottle) - Madurai Shop #05</div>
                                    <div class="text-muted small">20 Sep 2025, 10:45 AM | Whisky</div>
                                </div>
                                <div class="purchase-item">
                                    <div class="d-flex justify-content-between">
                                        <strong>Kumar (ID: 9012)</strong>
                                        <span class="badge bg-warning">Near Limit</span>
                                    </div>
                                    <div>0.4 L (2 bottles) - Coimbatore Shop #08</div>
                                    <div class="text-muted small">20 Sep 2025, 10:30 AM | Wine</div>
                                </div>
                                <div class="purchase-item">
                                    <div class="d-flex justify-content-between">
                                        <strong>Mohan (ID: 3456)</strong>
                                        <span class="badge bg-success">Available</span>
                                    </div>
                                    <div>0.2 L (1 bottle) - Chennai Shop #10</div>
                                    <div class="text-muted small">20 Sep 2025, 09:15 AM | Beer</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shop Activity Tab -->
            <div class="tab-pane fade" id="shop" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-store"></i> Shop Performance (This Week)
                            </div>
                            <div class="card-body">
                                <div class="shop-performance">
                                    <div class="d-flex justify-content-between">
                                        <strong>Chennai Shop #12</strong>
                                        <span>5.4 L (27 bottles)</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>Revenue: ₹16,200</small>
                                        <small>Stock: 120/150 bottles</small>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 75%"></div>
                                    </div>
                                </div>
                                
                                <div class="shop-performance">
                                    <div class="d-flex justify-content-between">
                                        <strong>Madurai Shop #05</strong>
                                        <span>3.2 L (16 bottles)</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>Revenue: ₹9,600</small>
                                        <small>Stock: 85/100 bottles</small>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 45%"></div>
                                    </div>
                                </div>
                                
                                <div class="shop-performance">
                                    <div class="d-flex justify-content-between">
                                        <strong>Coimbatore Shop #08</strong>
                                        <span>2.1 L (11 bottles)</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>Revenue: ₹6,300</small>
                                        <small>Stock: 64/80 bottles</small>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-info" role="progressbar" style="width: 30%"></div>
                                    </div>
                                </div>
                                
                                <div class="shop-performance">
                                    <div class="d-flex justify-content-between">
                                        <strong>Chennai Shop #10</strong>
                                        <span>1.3 L (7 bottles)</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>Revenue: ₹3,900</small>
                                        <small>Stock: 43/50 bottles</small>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 18%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-chart-bar"></i> Sales by Hour (Peak Times)
                            </div>
                            <div class="card-body">
                                <canvas id="peakTimesChart" height="250"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-map-marker-alt"></i> Shops by District
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <strong>Chennai</strong>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">3 shops</div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <strong>Madurai</strong>
                                    <div class="progress">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 33%" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100">2 shops</div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <strong>Coimbatore</strong>
                                    <div class="progress">
                                        <div class="progress-bar bg-info" role="progressbar" style="width: 17%" aria-valuenow="17" aria-valuemin="0" aria-valuemax="100">1 shop</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-trophy"></i> Top Performing Shop
                            </div>
                            <div class="card-body text-center">
                                <i class="fas fa-store fa-3x text-warning mb-3"></i>
                                <h3>Chennai Shop #12</h3>
                                <p>Total Revenue: ₹16,200</p>
                                <p>Total Sales: 5.4L (27 bottles)</p>
                                <div class="badge bg-success">Best Performance</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Compliance Tab -->
            <div class="tab-pane fade" id="compliance" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-calendar-times"></i> Dry Day Compliance
                            </div>
                            <div class="card-body">
                                <div class="alert alert-success">
                                    <i class="fas fa-check-circle"></i> No dry day violations detected this month
                                </div>
                                <h5>Upcoming Dry Days</h5>
                                <ul class="list-group">
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Gandhi Jayanti
                                        <span class="badge bg-primary rounded-pill">2 Oct 2025</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Diwali
                                        <span class="badge bg-primary rounded-pill">20 Oct 2025</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Christmas
                                        <span class="badge bg-primary rounded-pill">25 Dec 2025</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-exclamation-triangle"></i> Limit Compliance
                            </div>
                            <div class="card-body">
                                <div class="alert alert-warning">
                                    <i class="fas fa-exclamation-triangle"></i> 1 user has reached monthly limit
                                </div>
                                <div class="consumption-meter">
                                    <div class="d-flex justify-content-between">
                                        <strong>Users at Limit</strong>
                                        <span class="badge bg-danger">1</span>
                                    </div>
                                    <div class="mt-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Near Limit (80%+):</span>
                                            <span>2 users</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-warning" role="progressbar" style="width: 25%"></div>
                                        </div>
                                    </div>
                                    <div class="mt-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Within Limits:</span>
                                            <span>5 users</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 62.5%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-list-alt"></i> Compliance Report
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Shop</th>
                                                <th>Total Sales</th>
                                                <th>Dry Day Compliance</th>
                                                <th>User Limit Checks</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Chennai #12</td>
                                                <td>5.4L</td>
                                                <td>100%</td>
                                                <td>42/42</td>
                                                <td><span class="badge bg-success">Compliant</span></td>
                                            </tr>
                                            <tr>
                                                <td>Madurai #05</td>
                                                <td>3.2L</td>
                                                <td>100%</td>
                                                <td>28/28</td>
                                                <td><span class="badge bg-success">Compliant</span></td>
                                            </tr>
                                            <tr>
                                                <td>Coimbatore #08</td>
                                                <td>2.1L</td>
                                                <td>100%</td>
                                                <td>19/19</td>
                                                <td><span class="badge bg-success">Compliant</span></td>
                                            </tr>
                                            <tr>
                                                <td>Chennai #10</td>
                                                <td>1.3L</td>
                                                <td>100%</td>
                                                <td>15/15</td>
                                                <td><span class="badge bg-success">Compliant</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports & Insights Tab -->
            <div class="tab-pane fade" id="reports" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-chart-line"></i> Monthly Sales Trend (Liters)
                            </div>
                            <div class="card-body">
                                <canvas id="salesTrendChart" height="250"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-map-marked-alt"></i> Sales Performance by District
                            </div>
                            <div class="card-body">
                                <div class="district-performance">
                                    <div class="d-flex justify-content-between">
                                        <strong>Chennai District</strong>
                                        <span>6.7L (33 bottles)</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>Revenue: ₹20,100</small>
                                        <small>3 shops</small>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 54%">54% of total sales</div>
                                    </div>
                                </div>
                                
                                <div class="district-performance">
                                    <div class="d-flex justify-content-between">
                                        <strong>Madurai District</strong>
                                        <span>3.2L (16 bottles)</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>Revenue: ₹9,600</small>
                                        <small>2 shops</small>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 26%">26% of total sales</div>
                                    </div>
                                </div>
                                
                                <div class="district-performance">
                                    <div class="d-flex justify-content-between">
                                        <strong>Coimbatore District</strong>
                                        <span>2.1L (11 bottles)</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>Revenue: ₹6,300</small>
                                        <small>1 shop</small>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-info" role="progressbar" style="width: 17%">17% of total sales</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-wine-bottle"></i> Popular Alcohol Brands
                            </div>
                            <div class="card-body">
                                <div class="list-group">
                                    <div class="list-group-item d-flex justify-content-between align-items-center">
                                        Imperial Blue
                                        <span class="badge bg-primary rounded-pill">42%</span>
                                    </div>
                                    <div class="list-group-item d-flex justify-content-between align-items-center">
                                        Kingfisher
                                        <span class="badge bg-primary rounded-pill">35%</span>
                                    </div>
                                    <div class="list-group-item d-flex justify-content-between align-items-center">
                                        Officer's Choice
                                        <span class="badge bg-primary rounded-pill">15%</span>
                                    </div>
                                    <div class="list-group-item d-flex justify-content-between align-items-center">
                                        McDowell's
                                        <span class="badge bg-primary rounded-pill">8%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-file-export"></i> Generate Reports
                            </div>
                            <div class="card-body">
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-primary">
                                        <i class="fas fa-download"></i> Monthly Sales Report
                                    </button>
                                    <button class="btn btn-outline-primary">
                                        <i class="fas fa-download"></i> User Consumption Report
                                    </button>
                                    <button class="btn btn-outline-primary">
                                        <i class="fas fa-download"></i> Compliance Report
                                    </button>
                                    <button class="btn btn-outline-primary">
                                        <i class="fas fa-download"></i> Shop Performance Report
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="last-updated">
            Last updated: <span id="update-time">20-09-2025 11:20:09</span>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Alcohol Preference Chart
    const alcoholPreferenceCtx = document.getElementById('alcoholPreferenceChart').getContext('2d');
    const alcoholPreferenceChart = new Chart(alcoholPreferenceCtx, {
        type: 'doughnut',
        data: {
            labels: ['Beer', 'Whisky', 'Wine', 'Other'],
            datasets: [{
                data: [45, 35, 15, 5],
                backgroundColor: [
                    'rgba(54, 162, 235, 0.7)',
                    'rgba(255, 99, 132, 0.7)',
                    'rgba(75, 192, 192, 0.7)',
                    'rgba(153, 102, 255, 0.7)'
                ],
                borderColor: [
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 99, 132, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                },
                title: {
                    display: true,
                    text: 'Alcohol Consumption by Type'
                }
            }
        }
    });

    // Peak Times Chart
    const peakTimesCtx = document.getElementById('peakTimesChart').getContext('2d');
    const peakTimesChart = new Chart(peakTimesCtx, {
        type: 'bar',
        data: {
            labels: ['10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM'],
            datasets: [{
                label: 'Bottles Sold',
                data: [12, 19, 25, 22, 18, 15, 20, 28, 32, 25],
                backgroundColor: 'rgba(54, 162, 235, 0.5)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Bottles Sold'
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Time of Day'
                    }
                }
            }
        }
    });

    // Sales Trend Chart
    const salesTrendCtx = document.getElementById('salesTrendChart').getContext('2d');
    const salesTrendChart = new Chart(salesTrendCtx, {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
            datasets: [{
                label: 'Liters Sold',
                data: [85, 78, 92, 105, 98, 112, 135, 158, 124],
                fill: false,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Liters'
                    }
                }
            }
        }
    });

    // MongoDB connection simulation
    document.addEventListener('DOMContentLoaded', function() {
        // Add logout functionality - FIXED: Remove confirmation dialog and use correct route
        document.getElementById('logoutBtn').addEventListener('click', function() {
            // Direct redirect to admin login page without confirmation
            window.location.href = '/admin-logout';
        });
        
        // Simulate data refresh from MongoDB
        const refreshBtn = document.createElement('button');
        refreshBtn.className = 'btn btn-success';
        refreshBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh MongoDB Data';
        refreshBtn.style.position = 'fixed';
        refreshBtn.style.bottom = '20px';
        refreshBtn.style.right = '20px';
        refreshBtn.style.zIndex = '1000';
        document.body.appendChild(refreshBtn);
        
        refreshBtn.addEventListener('click', function() {
            // Simulate data refresh
            const totalUsers = document.getElementById('total-users');
            const todaySales = document.getElementById('today-sales');
            const monthSales = document.getElementById('month-sales');
            
            // Animate the count update
            animateValue(totalUsers, 8, 12, 1000);
            animateValue(todaySales, 12, 18, 1000);
            animateValue(monthSales, 124, 142, 1000);
            
            // Update timestamp
            document.getElementById('update-time').textContent = new Date().toLocaleString();
            
            // Show notification
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert alert-success position-fixed';
            alertDiv.style.top = '80px';
            alertDiv.style.right = '20px';
            alertDiv.style.zIndex = '1000';
            alertDiv.innerHTML = '<i class="fas fa-check-circle"></i> Data successfully refreshed from MongoDB';
            document.body.appendChild(alertDiv);
            
            // Remove alert after 3 seconds
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        });

        // Function to animate value counting
        function animateValue(element, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                element.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }
    });
</script>
</body>
</html>